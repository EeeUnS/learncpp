---
title: "동적할당"
author: yunselee
date: 2025-10-03
category: C
layout: post
---




# 포인터
포인터는 메모리의 주소를 저장하는 변수입니다. 동적할당과 메모리 관리에서 매우 중요한 역할을 합니다.
```c
int a = 10;
int *p = &a; // p는 a의 주소를 저장
printf("%d", *p); // p가 가리키는 곳의 값(10) 출력
```

# 동적할당
동적할당은 프로그램 실행 중에 메모리를 직접 할당받는 방법입니다. C에서는 `malloc`, `calloc`, `realloc` 함수를 사용합니다.
```c
#include <stdlib.h>
int *arr = malloc(sizeof(int) * 5); // int 5개 크기만큼 메모리 할당
for(int i=0; i<5; i++) arr[i] = i*2;
```
동적할당된 메모리는 포인터로만 접근할 수 있습니다.

# 지역변수와 동적할당
지역변수는 함수가 끝나면 자동으로 소멸되지만, 동적할당된 메모리는 직접 해제하기 전까지 남아있습니다.
```c
void foo() {
	int x = 10; // 지역변수, 함수 끝나면 사라짐
	int *p = malloc(sizeof(int)); // 동적할당, 함수 끝나도 남아있음
	*p = 20;
	// ...
	free(p); // 직접 해제 필요
}
```

# 할당 해제
동적할당한 메모리는 반드시 `free`로 해제해야 합니다. 해제하지 않으면 메모리 누수가 발생합니다.
```c
int *p = malloc(sizeof(int) * 10);
// ... 사용
free(p); // 메모리 반환
```

# 메모리 누수
메모리 누수란, 할당한 메모리를 해제하지 않아 프로그램이 점점 더 많은 메모리를 차지하게 되는 현상입니다. 반복적으로 동적할당만 하고 해제하지 않으면 프로그램이 느려지거나 비정상 종료될 수 있습니다.
```c
for(int i=0; i<1000; i++) {
	int *p = malloc(sizeof(int) * 100);
	// ... 사용
	// free(p); // 해제하지 않으면 누수 발생
}
```
실제 프로그램에서는 동적할당 후 반드시 free로 해제하는 습관이 중요합니다.
